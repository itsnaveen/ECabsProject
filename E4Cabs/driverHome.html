<!DOCTYPE html>

<html>
    <head>
        <title></title>
        <link rel="stylesheet" type="text/css" href="css/site.css" />
        <link rel="stylesheet" type="text/css" href="css/index.css" />
        <link rel="stylesheet" type="text/css" href="css/jqx.base.css"/>
        <link rel="stylesheet" type="text/css" href="css/jqx.energyblue.css"/>
        <link rel="stylesheet" type="text/css" href="css/PopUp.css" />
        <script type="text/javascript" src="Scripts/jquery-1.8.2.js"></script>
         <script type="text/javascript" src="Scripts/jquery-1.7.1.min.js"></script>
        <script type="text/javascript" src="Scripts/jqx-all.js"></script>
        <script type="text/javascript" src="Scripts/jquery.unobtrusive-ajax.min.js"></script>
        <script type="text/javascript" src="js/driverHome.js"></script>
        <link rel="stylesheet" type="text/css" href="css/jquery.mobile.css" />
        <!--<link rel="stylesheet" href="css/slider/jquery.mobile-1.3.1.min.css" />-->
        <script type="text/javascript" src="Scripts/slider/jquery-1.9.1.min.js"></script>
        <script type="text/javascript" src="Scripts/slider/jquery.mobile-1.3.1.min.js"></script>
       <!--<script type="text/javascript" src="js/PopUp.js"></script>-->
       <script type="text/javascript">
        $(document).ready(function () {
            $('#popupBoxClose').click(function () {
                unloadPopupBox();
            });
        });
        function unloadPopupBox() {
            $('#popup_box').fadeOut("slow");
        }
        window.setInterval(function () {
            var fp = "560078";
            var tp = "560102";
            var source = {
                type: "GET",
                url: "http://115.115.159.126/ECabs/ECabs4U.asmx/GetData?FP1=" + fp + "&FP2=" + tp,
                data: {},
                datatype: "json",
                datafields: [
                    { name: 'DriverID', type: 'long' },
                    { name: 'DriverName', type: 'string' },
                    { name: 'Postcode', type: 'string' },
                    { name: 'MobileNumber', type: 'string' }
                ],
                cache: false,
                root: 'data',
                async: false
            };
            $('#jqxgrid').bind('bindingcomplete', function (){});            
            var dataAdapter = new $.jqx.dataAdapter(source, {
                contentType: 'application/json; charset=utf-8',
                downloadComplete: function (data, textStatus, jqXHR)
                {
                    return data.d;
                }
            });
            var cellsrenderer = function ()
            {
                return '<div style="text-align: center;">' + value + '</div>';
            }
            var columnrenderer = function (value)
            {
                return '<div style="text-align: center;">' + value + '</div>';
            }
            $("#jqxgrid").jqxGrid({
                width: '500',
                source: dataAdapter,
                autoheight: true,
                theme: 'energyblue',
                pageable: true,                
                columns: [
                    { text: 'DriverID', dataField: 'DriverID', renderer: columnrenderer, cellsrenderer: cellsrenderer, width: 100, hidden: true },
                    { text: 'DriverName', dataField: 'DriverName', renderer: columnrenderer, cellsrenderer: cellsrenderer, width: 100 },
                    { text: 'Postcode', dataField: 'Postcode', renderer: columnrenderer, cellsrenderer: cellsrenderer, width: 100 },
                    { text: 'MobileNumber', dataField: 'MobileNumber', renderer: columnrenderer, cellsrenderer: cellsrenderer, width: 100 },
                    {
                        text: '', datafield: 'DriverID', columntype: 'button', renderer: columnrenderer, cellsrenderer: cellsrenderer, width: 100,
                        cellsrenderer: function ()
                        {
                            return "Accept";
                        },
                        buttonclick: function (row)
                        {
                            editrowindex = row;
                            var id = $("#jqxgrid").jqxGrid('getcellvalue', row, "DriverID");
                            alert(id);
                            alert("accepting");
                        }
                    },
                    {
                        text: '', datafield: 'DriverID', columntype: 'button', renderer: columnrenderer, cellsrenderer: cellsrenderer, width: 100,
                        cellsrenderer: function ()
                        {
                            return "Reject";
                        },
                        buttonclick: function (row)
                        {
                            editrowindex = row;
                            var id = $("#jqxgrid").jqxGrid('getcellvalue', row, "DriverID");
                            alert(id);
                            alert("rejecting");
                        }
                    }
                ]
            });
            var renderer = function (id)
            {
                return "<input type='button' onClick='buttonclick(event)' class='gridButton' id='btn" + id + "' value='Accept'/>"
            };
            $('#popup_box').fadeIn("slow");
        }, 10000);
    </script>
    </head>
    <body>
        <center>
             
            <div class="header">
            <div style="float:left;height:48px;width:100px">
                <img src="img/site-logo.png" class="logo"/>
            </div>
            <div style="width:200px; height:50px;text-align:center">
                <div style="padding-top:13px;">
                    <i class="header-font">Home</i>
                    
                </div>
            </div>
            
        </div>
             <div style="padding-top:75px;">
            <img src="img/LoganCar.png" width="60%" height="25%"/>
        </div>
         <div style="padding-top:10px;">
          <div style="width:80%;height:30px;background-color:#777B81;border-radius:3px;">
            <marquee slide="left" style="font-size:15px;color:#ffffff;padding-top:5px;">
               <i>Your Current Status is: &nbsp;<label id="driverStatusupdate" style="color:blue"/>Available</i>
            </marquee>
          </div>
             <div style="padding-top:10%;width:80%">
            <input type="button"  value="Change Current Status" onclick="DriverStatus()"/>
           <!-- <input type="button" class="btn-tmp cursor" value="Profile" onclick="DriverProfile()"/>-->
            
         </div> 
             <div style="padding-top:2%;width:80%;padding-bottom:27%">
                 <input type="button"  value="My Jobs" onclick="Jobs();" style="margin-top:5px;"/>
             </div>
        </div>
           <div style="padding-top:0px">
            
             <a id="bars-button" data-icon="bars"   style="margin-bottom:0px;text-align:center;" href="#navpanel"><img src="img/menubtn.png"/></a>
        </div>
            <div  data-role="panel" id="navpanel" data-theme="a" data-display="overlay" data-position="left" >
                <div data-role="controlgroup" data-corners="true">
                     <a id="bars-button" data-icon="bars"   style="margin-top:10px;text-align:center;" href="#navpanel"><img src="img/menubtnup.png"/></a><br/>
                    <a><label style="text-align:center; font-size:16px;color:black;">Menu</label></a>
                    <a onclick="myProfile()"  data-role="button" style="text-align:left; font-family:cursive;font-size:14px;" ><img src="img/profile.png" width="22px;" style="float:left;"/><span style="margin-left:10px;" >My Profile</span></a>
                    <a onclick="myStatus()"  data-role="button" style="text-align:left; font-family:cursive;font-size:14px;" ><img src="img/status_away.png" width="22px;" style="float:left;"/><span style="margin-left:10px;" >My Status</span></a>
                    <a onclick="MyBookings()" data-role="button" style="text-align:left; font-family:cursive;font-size:14px;"><img src="img/car.png" width="22px;" style="float:left;"/><span style="margin-left:10px;" >My Bookings</span></a>
                    <a onclick="feedBack()" data-role="button" style="text-align:left; font-family:cursive;font-size:14px;"><img src="img/feedback.png" width="24px;" style="float:left;"/><span style="margin-left:10px;" >FeedBack</span></a>
                    <a onclick="logout()" data-role="button" style="text-align:left; font-family:cursive;font-size:14px;"><img src="img/logout.png" width="24px;" style="float:left;"/><span style="margin-left:10px;" >Logout</span></a>
                </div>
            </div>
            <div id="popup_box">
            <a id="popupBoxClose" style="cursor: pointer;">
                <img src="img/close.png" style="height: 40px; width: 40px; margin-top: -30px; margin-right: -26px;" />
            </a>
            <br />
            <div align="center" style="overflow:auto;">                
                <div id="jqxgrid"></div>
            </div>
            <br />
        </div>
      
         </center>
    </body>
</html>